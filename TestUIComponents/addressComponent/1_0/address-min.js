var anetAddress=angular.module("anetAddress",[]);anetAddress.service("GetCityStateService",["$q","$http",function(a,c){var b={getCityAndZip:function(e){var f="//maps.googleapis.com/maps/api/geocode/json?address="+e+"&sensor=true";var d=a.defer();c({method:"GET",url:f}).then(function(g){d.resolve(g.data)},function(g){d.reject(g)});return d.promise}};return b}]);anetAddress.directive("anetAddressForm",["GetCityStateService","$window",function(a,b){function c(d){var f=document.createElement("link");f.href="scripts/components/addressComponent/1_0/assets/addressForm.css";f.rel="stylesheet";var e=document.getElementsByTagName("head")[0].getElementsByTagName("link").length-1;var g=angular.element(document.getElementsByTagName("head")[0].getElementsByTagName("link")[e]);angular.element(f).insertAfter(g);d.defaultFields="";d.countries=d.opt.country.list;d.zipFocusOut=function(){d.hasZipFocus=false;angular.element("#zipID").removeClass("bg-border-color");if(d.opt.country.model==="United States of America"&&d.opt.zip.model&&d.opt.zip.model.length==5){var h=a.getCityAndZip(d.opt.zip.model);h.then(function(i){if(i.status==="OK"){if(i.results.length==1){if(i.results[0].formatted_address!==undefined&&i.results[0].formatted_address.length>0){var j=i.results[0].formatted_address.split(/,/);if(j.length===3&&(j[2]&&j[2].trim()==="USA")){var k=j[1].split(/ /);d.opt.city.model=j[0];d.opt.state.model=j[1].split(/ /)[1]}}}}})}};d.getInputFieldClass=function(j,h){j=j===undefined||j===null?"":j;var i=h===true||j.length!==0?"address-floating-placeholder-float address-floating-placeholder":"address-floating-placeholder";return i};d.getCountryClass=function(){var j="form-control countryStyle";var k=function(l){if(!l){return false}if(l.indexOf('"')>=0){return false}if(l.indexOf("'")>=0){return false}if(l.indexOf("\n")>=0){return false}return true};var h=(typeof g_iframeCommunicatorUrl==="undefined")?"":g_iframeCommunicatorUrl;var i=k(h);if(i){j=j+" CountryForIFrame"}else{j=j+((/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase()))===true?" CountryForMobile":" CountryForDesktop")}return j};d.isBrowserIE9=function(){var i=b.document;var h=(!!i.documentMode)?((i.documentMode===9)?true:false):false;return h};d.getLabelClass=function(h){return h===true?"address-focuscolorEffect label-color":"address-focuscolorGreyEffect"};d.getIE9LabelClass=function(h){var i=h===true?"address-ie9FocusInLabelClass label-color":"address-ie9FocusOutLabelClass";return i};d.focusIn=function(h){angular.element("#"+h).addClass("bg-border-color")};d.focusOut=function(h){angular.element("#"+h).removeClass("bg-border-color")};d.isFieldMandatory=function(j,h){var i="";j=j===undefined?"":j;if(h===false&&d.opt.addressRequired&&j.length===0){i=i+"address-text-intent address-inValidBorderBottom"}else{i=i+"address-text-intent"}return i};d.getPhoneNumberClass=function(){var h="";h=h+"address-text-intent";return h}}c.$inject=["$scope"];return{restrict:"E",templateUrl:"scripts/components/addressComponent/1_0/assets/addressForm.html",scope:{opt:"="},replace:true,controller:c}}]);anetAddress.directive("myMaxlength",["$compile",function(a){return{restrict:"A",require:"ngModel",link:function(d,e,b,f){var c=parseInt(b.myMaxlength,10);f.$parsers.push(function(g){if(g.length>c){g=g.substr(0,c);f.$setViewValue(g);f.$render()}return g})}}}]);anetAddress.directive("numOnly",function(){return{require:"ngModel",link:function(d,b,a,c){c.$parsers.push(function(e){if(d.opt.country.model==="United States of America"){var f=e.replace(/[^0-9]/g,"");if(f!=e){c.$setViewValue(f);c.$render()}return f}else{return e}})}}});anetAddress.directive("phoneNumberFormat",function(){return{require:"ngModel",link:function(d,b,a,c){c.$parsers.push(function(e){var f=e.replace(/[^0-9\s-+()]/g,"");if(f!=e){c.$setViewValue(f);c.$render()}return f})}}});anetAddress.directive("resetField",["$compile","$timeout",function(b,a){return{require:"ngModel",scope:{},link:function(f,e,c,g){var d=b('<i ng-show="enabled" ng-mousedown="reset()" style="top: 36px; position:relative; float:right; display:inline-block;background: url(../profile/content/icons.png); background-position: -270px 0px; width: 34px; height:28px ;background-size:304px;background-repeat: no-repeat;outline:0;margin-right: -26px;"></i>')(f);e.after(d);f.reset=function(){g.$setViewValue("");g.$render();a(function(){e[0].focus();f.$apply()},0,false)};e.bind("input",function(){f.enabled=!g.$isEmpty(e.val())}).bind("focus",function(){f.enabled=!g.$isEmpty(e.val());f.$apply()}).bind("blur",function(){f.enabled=false;f.$apply()})}}}]);